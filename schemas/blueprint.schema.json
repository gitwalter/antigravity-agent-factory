{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://cursor-agent-factory.dev/schemas/blueprint.schema.json",
    "title": "Blueprint Schema",
    "description": "Schema for blueprint orchestration files in {directories.blueprints}/*/blueprint.json",
    "type": "object",
    "required": [
        "metadata",
        "agents",
        "skills",
        "knowledge",
        "workflows"
    ],
    "properties": {
        "metadata": {
            "type": "object",
            "required": [
                "blueprintId",
                "blueprintName",
                "description",
                "version"
            ],
            "properties": {
                "blueprintId": {
                    "type": "string",
                    "pattern": "^[a-z0-9-]+$",
                    "minLength": 3,
                    "description": "Unique blueprint identifier matching directory name"
                },
                "blueprintName": {
                    "type": "string",
                    "minLength": 10,
                    "description": "Human-readable blueprint name"
                },
                "description": {
                    "type": "string",
                    "minLength": 30,
                    "description": "Detailed description of what this blueprint builds"
                },
                "version": {
                    "type": "string",
                    "pattern": "^\\d+\\.\\d+\\.\\d+$"
                },
                "author": {
                    "type": "string"
                },
                "tags": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "extends": {
                    "type": "string"
                },
                "purpose": {
                    "type": "string"
                }
            }
        },
        "tooling": {
            "type": "object",
            "description": "Tooling configuration for the blueprint"
        },
        "stack": {
            "type": "object",
            "description": "Technology stack configuration"
        },
        "agents": {
            "type": "array",
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "object",
                        "required": [
                            "patternId"
                        ],
                        "properties": {
                            "patternId": {
                                "type": "string"
                            },
                            "required": {
                                "type": "boolean"
                            },
                            "customizations": {
                                "type": "object"
                            },
                            "description": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "minItems": 1,
            "description": "Agents included in this blueprint"
        },
        "skills": {
            "type": "array",
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "object",
                        "required": [
                            "patternId"
                        ],
                        "properties": {
                            "patternId": {
                                "type": "string"
                            },
                            "required": {
                                "type": "boolean"
                            },
                            "default": {
                                "type": "boolean"
                            },
                            "description": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "minItems": 1,
            "description": "Skills required by this blueprint"
        },
        "knowledge": {
            "type": "array",
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "object",
                        "required": [
                            "filename"
                        ],
                        "properties": {
                            "filename": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "minItems": 1,
            "description": "Knowledge files required"
        },
        "workflows": {
            "type": "array",
            "items": {
                "oneOf": [
                    {
                        "type": "string"
                    },
                    {
                        "type": "object",
                        "required": [
                            "patternId"
                        ],
                        "properties": {
                            "patternId": {
                                "type": "string"
                            },
                            "customizations": {
                                "type": "object"
                            }
                        }
                    }
                ]
            },
            "minItems": 1,
            "description": "Workflows included"
        },
        "templates": {
            "type": "object",
            "description": "Templates configuration"
        },
        "domainAgents": {
            "type": "object",
            "description": "Domain-specific agent definitions"
        },
        "domainSkills": {
            "type": "array",
            "description": "Domain-specific skills"
        },
        "domainKnowledge": {
            "type": "array",
            "description": "Domain-specific knowledge files"
        },
        "agentTeam": {
            "type": "object",
            "description": "Agent team configuration"
        },
        "mcpServers": {
            "type": "array",
            "description": "MCP servers configuration"
        },
        "projectStructure": {
            "type": "object",
            "description": "Project directory structure"
        },
        "cursorrules": {
            "type": "object",
            "description": "Cursor rules configuration"
        },
        "layerDefaults": {
            "type": "object",
            "description": "Default layer configurations"
        },
        "axiomAlignment": {
            "type": "object",
            "description": "Axiom alignment declarations"
        },
        "safetyRequirements": {
            "type": "object",
            "description": "Safety requirements"
        },
        "pmIntegration": {
            "type": "object",
            "description": "Project management integration"
        }
    }
}