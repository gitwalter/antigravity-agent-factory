{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://antigravity-agent-factory.dev/schemas/registry.schema.json",
    "title": "Artifact Registry Schema",
    "description": "Schema for the central artifact registry at artifacts/registry.json",
    "type": "object",
    "required": [
        "version",
        "description",
        "generated_at",
        "artifacts",
        "relations"
    ],
    "additionalProperties": false,
    "properties": {
        "$schema": {
            "type": "string",
            "description": "Schema URI for self-referencing"
        },
        "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$",
            "description": "Registry version (semver)"
        },
        "description": {
            "type": "string",
            "minLength": 10,
            "description": "Registry description"
        },
        "generated_at": {
            "type": "string",
            "description": "ISO 8601 timestamp of last generation"
        },
        "artifacts": {
            "type": "object",
            "required": [
                "agents",
                "skills",
                "knowledge",
                "blueprints",
                "workflows"
            ],
            "properties": {
                "agents": {
                    "type": "object",
                    "properties": {
                        "cursor": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "pattern": "^[a-z0-9-]+$"
                            },
                            "description": "Cursor agent identifiers"
                        },
                        "python": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "description": "Python agent identifiers"
                        }
                    },
                    "description": "Agent artifacts by platform"
                },
                "skills": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "pattern": "^[a-z0-9-]+$"
                        }
                    },
                    "description": "Skill artifacts grouped by category"
                },
                "knowledge": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "description": "Knowledge file artifacts grouped by category"
                },
                "blueprints": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z0-9-]+$"
                    },
                    "description": "Blueprint identifiers"
                },
                "templates": {
                    "type": "object",
                    "description": "Template artifacts"
                },
                "workflows": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "description": "Workflow artifacts grouped by domain"
                }
            },
            "description": "All registered artifacts by type"
        },
        "relations": {
            "type": "object",
            "properties": {
                "agent_to_skills": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "description": "Mapping of agents to their skills"
                },
                "skill_to_knowledge": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "description": "Mapping of skills to knowledge files"
                },
                "blueprint_to_agents": {
                    "type": "object",
                    "additionalProperties": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "description": "Mapping of blueprints to agents"
                }
            },
            "description": "Cross-artifact relationships"
        }
    }
}
