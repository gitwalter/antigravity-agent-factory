{
  "$schema": "../learning-workshop-pattern.json",
  "workshopId": "L5_crewai_multiagent",
  "name": "CrewAI Multi-Agent Systems",
  "technology": {
    "category": "ai_framework",
    "stack": "CrewAI",
    "language": "Python",
    "version": "CrewAI 0.30+"
  },
  "level": "fundamentals",
  "prerequisites": {
    "workshops": [],
    "knowledge": [
      "Python programming (classes, decorators)",
      "Basic understanding of LLMs and agents",
      "Object-oriented programming concepts"
    ],
    "tools": [
      "Python 3.10+",
      "OpenAI API key (or other LLM provider)",
      "VS Code or similar IDE"
    ]
  },
  "duration": {
    "total_hours": 2.5,
    "concept_minutes": 30,
    "demo_minutes": 30,
    "exercise_minutes": 45,
    "challenge_minutes": 30,
    "reflection_minutes": 15
  },
  "learning_objectives": [
    {
      "objective": "Understand CrewAI's core concepts: agents, tasks, and crews",
      "bloom_level": "understand",
      "verification": "Can explain the relationship between agents, tasks, and crews"
    },
    {
      "objective": "Create specialized agents with roles, goals, and backstories",
      "bloom_level": "apply",
      "verification": "Creates agent with proper role, goal, and backstory configuration"
    },
    {
      "objective": "Define tasks with expected outputs and agent assignments",
      "bloom_level": "apply",
      "verification": "Creates task with clear description and expected output"
    },
    {
      "objective": "Orchestrate crews with sequential and hierarchical execution patterns",
      "bloom_level": "apply",
      "verification": "Builds crew that executes tasks in correct order"
    },
    {
      "objective": "Implement Flows for complex state management and multi-step workflows",
      "bloom_level": "apply",
      "verification": "Creates Flow with state transitions and conditional logic"
    }
  ],
  "knowledge_files": [
    "crewai-patterns.json",
    "multi-agent-patterns.json"
  ],
  "phases": [
    {
      "phaseId": "concept",
      "name": "CrewAI Architecture Overview",
      "type": "concept",
      "duration_minutes": 30,
      "description": "Understand the building blocks of CrewAI multi-agent systems",
      "content": {
        "topics": [
          "Agent: Role, Goal, Backstory, and Tools",
          "Task: Description, Expected Output, and Agent Assignment",
          "Crew: Sequential vs Hierarchical Execution",
          "Process: How agents collaborate and share context",
          "Flows: State management and complex workflows",
          "Memory: Context sharing between agents"
        ],
        "diagrams": [
          "Agent structure (role, goal, backstory)",
          "Crew execution flow (sequential)",
          "Hierarchical crew structure",
          "Flow state machine diagram"
        ],
        "key_points": [
          "Agents are specialized with clear roles and goals",
          "Tasks define what needs to be done and by whom",
          "Crews orchestrate agent collaboration",
          "Sequential crews execute tasks one after another",
          "Hierarchical crews enable manager-worker patterns",
          "Flows provide state management for complex workflows"
        ]
      },
      "facilitator_notes": "Emphasize the importance of clear role definition. Show how agents collaborate through shared context.",
      "common_questions": [
        "What's the difference between sequential and hierarchical crews?",
        "How do agents share information?",
        "When should I use Flows vs simple Crews?"
      ]
    },
    {
      "phaseId": "demo",
      "name": "Building a Research Crew",
      "type": "demo",
      "duration_minutes": 30,
      "description": "Live coding a multi-agent research system",
      "content": {
        "topics": [
          "Creating researcher agent with web search tool",
          "Creating writer agent for report generation",
          "Defining research and writing tasks",
          "Orchestrating crew with sequential execution",
          "Adding memory for context sharing",
          "Handling errors and retries"
        ],
        "code_examples": [
          "Agent creation with role and goal",
          "Task definition with expected output",
          "Crew creation and execution",
          "Flow with state management"
        ],
        "key_points": [
          "Clear role definition improves agent performance",
          "Expected outputs guide agent behavior",
          "Sequential execution ensures proper task ordering",
          "Memory enables context sharing between agents"
        ]
      },
      "facilitator_notes": "Show real execution and explain how agents collaborate. Discuss token usage and costs."
    },
    {
      "phaseId": "exercise_1",
      "name": "Creating an Analyst Team",
      "type": "exercise",
      "duration_minutes": 45,
      "description": "Build a crew of specialized analysts",
      "content": {
        "topics": [
          "Create data analyst agent",
          "Create market analyst agent",
          "Create report writer agent",
          "Define analysis tasks",
          "Orchestrate crew execution",
          "Handle task dependencies"
        ]
      }
    },
    {
      "phaseId": "challenge",
      "name": "Multi-Step Workflow with Flows",
      "type": "challenge",
      "duration_minutes": 30,
      "description": "Build a complex workflow using Flows",
      "content": {
        "topics": [
          "Design workflow state machine",
          "Create Flow with state transitions",
          "Implement conditional logic",
          "Handle error states",
          "Add human-in-the-loop steps"
        ]
      }
    },
    {
      "phaseId": "reflection",
      "name": "Key Takeaways and Best Practices",
      "type": "reflection",
      "duration_minutes": 15,
      "description": "Consolidate learning and discuss production considerations",
      "content": {
        "topics": [
          "Summary of CrewAI patterns",
          "Agent design best practices",
          "Task orchestration strategies",
          "Production considerations (costs, monitoring, error handling)",
          "Resources for continued learning"
        ],
        "key_points": [
          "Clear role definition is critical for agent performance",
          "Task ordering matters in sequential crews",
          "Use Flows for complex stateful workflows",
          "Monitor token usage and costs",
          "Implement proper error handling"
        ]
      }
    }
  ],
  "exercises": [
    {
      "exerciseId": "ex1_analyst_crew",
      "name": "Analyst Team Crew",
      "type": "guided",
      "difficulty": "medium",
      "duration_minutes": 45,
      "description": "Create a crew of specialized analysts working together",
      "starter_code": "from crewai import Agent, Task, Crew\nfrom crewai_tools import SerperDevTool\n\n# TODO: Create data analyst agent\n# Role: Data Analyst\n# Goal: Analyze data and extract insights\n# Backstory: Expert in data analysis and statistics\n\ndata_analyst = Agent(\n    role=\"\",\n    goal=\"\",\n    backstory=\"\",\n    verbose=True\n)\n\n# TODO: Create market analyst agent\nmarket_analyst = Agent(\n    role=\"\",\n    goal=\"\",\n    backstory=\"\",\n    verbose=True\n)\n\n# TODO: Create report writer agent\nreport_writer = Agent(\n    role=\"\",\n    goal=\"\",\n    backstory=\"\",\n    verbose=True\n)\n\n# TODO: Define tasks\n# Task 1: Analyze data (assigned to data_analyst)\n# Task 2: Analyze market trends (assigned to market_analyst)\n# Task 3: Write comprehensive report (assigned to report_writer)\n\ntask1 = Task(\n    description=\"\",\n    expected_output=\"\",\n    agent=data_analyst\n)\n\ntask2 = Task(\n    description=\"\",\n    expected_output=\"\",\n    agent=market_analyst\n)\n\ntask3 = Task(\n    description=\"\",\n    expected_output=\"\",\n    agent=report_writer\n)\n\n# TODO: Create crew and execute\ncrew = Crew(\n    agents=[],\n    tasks=[],\n    verbose=True\n)\n\nresult = crew.kickoff(inputs={\"topic\": \"AI trends in 2024\"})\nprint(result)",
      "solution_code": "from crewai import Agent, Task, Crew\nfrom crewai_tools import SerperDevTool\n\n# Data Analyst Agent\ndata_analyst = Agent(\n    role=\"Senior Data Analyst\",\n    goal=\"Analyze quantitative data and extract meaningful insights\",\n    backstory=\"You are an expert data analyst with 10 years of experience in statistical analysis and data visualization. You excel at finding patterns in complex datasets.\",\n    verbose=True,\n    allow_delegation=False\n)\n\n# Market Analyst Agent\nmarket_analyst = Agent(\n    role=\"Market Research Analyst\",\n    goal=\"Analyze market trends and competitive landscape\",\n    backstory=\"You are a seasoned market analyst specializing in industry trends, competitor analysis, and market opportunities. You have deep knowledge of various industries.\",\n    verbose=True,\n    allow_delegation=False\n)\n\n# Report Writer Agent\nreport_writer = Agent(\n    role=\"Technical Writer\",\n    goal=\"Create comprehensive, well-structured reports\",\n    backstory=\"You are an expert technical writer who excels at synthesizing complex information into clear, actionable reports. You ensure all reports are professional and easy to understand.\",\n    verbose=True,\n    allow_delegation=False\n)\n\n# Task 1: Data Analysis\ntask1 = Task(\n    description=\"Analyze the provided data about {topic}. Extract key metrics, trends, and insights. Focus on quantitative findings.\",\n    expected_output=\"A detailed data analysis report with key metrics, trends, and quantitative insights\",\n    agent=data_analyst\n)\n\n# Task 2: Market Analysis\ntask2 = Task(\n    description=\"Research and analyze market trends related to {topic}. Identify opportunities, threats, and competitive landscape.\",\n    expected_output=\"A comprehensive market analysis covering trends, opportunities, and competitive landscape\",\n    agent=market_analyst\n)\n\n# Task 3: Report Writing\ntask3 = Task(\n    description=\"Synthesize the data analysis and market analysis into a comprehensive report about {topic}. Include executive summary, key findings, and recommendations.\",\n    expected_output=\"A professional report with executive summary, key findings from both analyses, and actionable recommendations\",\n    agent=report_writer\n)\n\n# Create crew with sequential execution\ncrew = Crew(\n    agents=[data_analyst, market_analyst, report_writer],\n    tasks=[task1, task2, task3],\n    verbose=True,\n    process=\"sequential\"\n)\n\n# Execute\nresult = crew.kickoff(inputs={\"topic\": \"AI trends in 2024\"})\nprint(result)",
      "hints": [
        "Define clear, specific roles for each agent",
        "Make goals actionable and measurable",
        "Backstories should provide context for agent behavior",
        "Expected outputs should be specific and clear",
        "Use sequential process for dependent tasks"
      ],
      "verification": "Crew executes all three tasks in order and produces final report",
      "common_mistakes": [
        "Vague role or goal definitions",
        "Unclear expected outputs",
        "Wrong task ordering",
        "Missing agent assignments",
        "Not using sequential process when tasks depend on each other"
      ]
    }
  ],
  "challenges": [
    {
      "challengeId": "flow_workflow",
      "name": "Multi-Step Workflow with Flows",
      "description": "Build a complex workflow using CrewAI Flows for state management",
      "requirements": [
        "Design a workflow with at least 3 states",
        "Create Flow with state transitions",
        "Implement conditional logic based on state",
        "Handle error states gracefully",
        "Include at least one human-in-the-loop step",
        "Use multiple agents in the workflow"
      ],
      "evaluation_criteria": [
        "Flow correctly transitions between states",
        "Conditional logic works as expected",
        "Error handling is implemented",
        "Human-in-the-loop step is functional",
        "Agents collaborate effectively",
        "Final output is produced"
      ],
      "stretch_goals": [
        "Add parallel agent execution",
        "Implement retry logic with exponential backoff",
        "Add workflow visualization",
        "Create API endpoint for workflow execution"
      ]
    }
  ],
  "resources": {
    "official_docs": [
      "https://docs.crewai.com/",
      "https://github.com/joaomdmoura/crewAI"
    ],
    "tutorials": [
      "https://docs.crewai.com/tutorials/",
      "https://docs.crewai.com/how-to/Flows/"
    ],
    "community": [
      "CrewAI Discord",
      "GitHub Discussions"
    ]
  },
  "assessment": {
    "knowledge_check": [
      {
        "question": "What are the three core components of CrewAI?",
        "type": "multiple_choice",
        "answer": "Agents, Tasks, and Crews",
        "explanation": "Agents perform work, Tasks define what needs to be done, and Crews orchestrate execution"
      },
      {
        "question": "What's the difference between sequential and hierarchical crews?",
        "type": "short_answer",
        "answer": "Sequential crews execute tasks one after another in order. Hierarchical crews use a manager-worker pattern where a manager agent coordinates worker agents.",
        "explanation": "Choose sequential for linear workflows, hierarchical for coordination patterns"
      },
      {
        "question": "What is a Flow and when should you use it?",
        "type": "short_answer",
        "answer": "A Flow is a state machine for complex workflows with conditional logic and state transitions. Use it when you need state management, conditional branching, or human-in-the-loop steps.",
        "explanation": "Flows provide more control than simple crews for complex scenarios"
      }
    ],
    "practical_assessment": "Build a working multi-agent crew that successfully completes a multi-step task",
    "self_assessment": [
      "Can I explain the relationship between agents, tasks, and crews?",
      "Do I understand how to create effective agent roles and goals?",
      "Can I orchestrate a crew with proper task ordering?",
      "Do I know when to use Flows vs simple Crews?"
    ]
  },
  "next_steps": {
    "next_workshop": "L7_langchain_fundamentals",
    "practice_projects": [
      "Customer research crew with multiple analysts",
      "Code review crew with specialized reviewers",
      "Content creation crew with writer, editor, and publisher"
    ],
    "deeper_learning": [
      "Advanced Flow patterns",
      "Custom tool development",
      "Production deployment and monitoring"
    ]
  },
  "axiom_zero_integration": {
    "love_moments": [
      "Celebrating successful agent collaborations",
      "Encouraging experimentation with different agent configurations",
      "Patient debugging of crew execution issues"
    ],
    "truth_moments": [
      "Honest discussion of multi-agent system costs",
      "Clear explanation of when to use agents vs simpler solutions",
      "Acknowledging complexity trade-offs"
    ],
    "beauty_moments": [
      "Elegant crew orchestration patterns",
      "The satisfaction of seeing agents collaborate seamlessly",
      "Clean, well-structured agent and task definitions"
    ]
  }
}
