{% from '_macros/typescript.tmpl' import import_block, ts_docstring, react_component %}

{{ ts_docstring(
    description=PAGE_PURPOSE,
    author=AUTHOR,
    created=DATE,
    axioms=[
        "A1 (Verifiability): All data fetching is traceable",
        "A3 (Transparency): Clear page structure and data sources",
        "A4 (Non-Harm): Safe data handling and error boundaries"
    ]
) }}

{{ import_block([
    {'from': 'next', 'type_names': ['Metadata']},
    {'from': 'react', 'names': ['Suspense']},
    {'from': '@/components/' ~ FEATURE_NAME, 'names': [FEATURE_COMPONENT]},
    {'from': '@/components/' ~ LOADING_NAME, 'names': [LOADING_COMPONENT]},
    {'from': '@/components/' ~ ERROR_NAME, 'names': [ERROR_COMPONENT]},
    {'from': '@/lib/' ~ DATA_SOURCE, 'names': ['get' ~ DATA_NAME]}
]) }}

export const metadata: Metadata = {
  title: '{{PAGE_TITLE}}',
  description: '{{PAGE_DESCRIPTION}}',
}

{{ ts_docstring(
    description="Home page component.\n\nThis is a Server Component that can directly fetch data\nand render on the server for better performance.",
    returns="JSX element"
) }}
{% call react_component('HomePage', async=True, export=True, default=True) %}
  try {
    // Fetch data on the server
    const data = await get{{DATA_NAME}}()
    
    return (
      <main className="flex min-h-screen flex-col items-center justify-between p-24">
        <div className="z-10 max-w-5xl w-full items-center justify-between font-mono text-sm">
          <h1 className="text-4xl font-bold mb-8">
            {{PAGE_HEADING}}
          </h1>
          
          <Suspense fallback={<{{LOADING_COMPONENT}} />}>
            <{{FEATURE_COMPONENT}} data={data} />
          </Suspense>
        </div>
      </main>
    )
  } catch (error) {
    // Handle errors gracefully
    console.error('Error loading page data:', error)
    return <{{ERROR_COMPONENT}} error={error} />
  }
{% endcall %}