{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "id": "kotest-testing-framework-patterns",
  "name": "Kotest Testing Framework Patterns",
  "title": "Kotest Testing Framework Patterns",
  "description": "Kotest specs, matchers, property testing, and Testcontainers integration",
  "version": "1.0.0",
  "last_updated": "2026-02-10",
  "category": "testing",
  "axiomAlignment": {
    "A1_verifiability": "Kotest specs and matchers provide executable verification of Kotlin code",
    "A2_user_primacy": "BDD-style specs express user-facing behavior in readable format",
    "A3_transparency": "Rich assertions and property testing make expectations explicit",
    "A4_non_harm": "Isolated test containers and listeners prevent unintended side effects",
    "A5_consistency": "Unified testing idioms ensure consistent Kotlin test patterns"
  },
  "related_skills": [
    "bdd",
    "agent-testing",
    "spring-testing"
  ],
  "related_knowledge": [
    "test-patterns.json",
    "bdd-patterns.json",
    "testcontainers-patterns.json",
    "spring-kotlin-patterns.json",
    "kotlin-idioms.json"
  ],
  "patterns": {
    "behavior_spec_description": {
      "description": "Given-When-Then structure for BDD-style tests",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# behavior_spec_description pattern for kotest-patterns\n# Implement based on description: Given-When-Then structure for BDD-style tests...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "behavior_spec_idiom": {
      "description": "class UserServiceSpec : BehaviorSpec({ given(\"UserService\") { `when`(\"user exists\") { then(\"returns user\") { } } } })",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# behavior_spec_idiom pattern for kotest-patterns\n# Implement based on description: class UserServiceSpec : BehaviorSpec({ given(\"User...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "behavior_spec_when_to_use": {
      "description": "Feature testing, acceptance criteria, readable specs",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# behavior_spec_when_to_use pattern for kotest-patterns\n# Implement based on description: Feature testing, acceptance criteria, readable spe...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "behavior_spec_best_practices": {
      "description": "['Use for integration/feature tests', 'Keep scenarios focused', 'Nest given/when/then logically']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "word_spec_description": {
      "description": "String-based test names with nested context",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# word_spec_description pattern for kotest-patterns\n# Implement based on description: String-based test names with nested context...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "word_spec_idiom": {
      "description": "class CalculatorSpec : WordSpec({ \"Calculator\" should { \"add\" { 1 + 1 shouldBe 2 } } })",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# word_spec_idiom pattern for kotest-patterns\n# Implement based on description: class CalculatorSpec : WordSpec({ \"Calculator\" sho...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "word_spec_when_to_use": {
      "description": "Unit tests, quick specs",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# word_spec_when_to_use pattern for kotest-patterns\n# Implement based on description: Unit tests, quick specs...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "word_spec_best_practices": {
      "description": "['Use should for behavior', 'Keep nesting shallow']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "annotations_description": {
      "description": "JUnit-style annotations for compatibility",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# annotations_description pattern for kotest-patterns\n# Implement based on description: JUnit-style annotations for compatibility...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "annotations_idiom": {
      "description": "@Test fun `addition works`() { 1 + 1 shouldBe 2 }",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# annotations_idiom pattern for kotest-patterns\n# Implement based on description: @Test fun `addition works`() { 1 + 1 shouldBe 2 }...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "annotations_when_to_use": {
      "description": "Migration from JUnit, IDE integration",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# annotations_when_to_use pattern for kotest-patterns\n# Implement based on description: Migration from JUnit, IDE integration...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "annotations_best_practices": {
      "description": "['Use for gradual migration', 'Prefer Kotest native styles when possible']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "matchers_description": {
      "description": "Rich assertion library: shouldBe, shouldNotBe, shouldThrow, contain, haveSize",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# matchers_description pattern for kotest-patterns\n# Implement based on description: Rich assertion library: shouldBe, shouldNotBe, sho...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "matchers_idiom": {
      "description": "list.shouldContain(item); result.shouldBePositive(); { throw() }.shouldThrow<IllegalStateException>()",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# matchers_idiom pattern for kotest-patterns\n# Implement based on description: list.shouldContain(item); result.shouldBePositive(...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "matchers_when_to_use": {
      "description": "All test assertions ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# matchers_when_to_use pattern for kotest-patterns\n# Implement based on description: All test assertions ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "matchers_best_practices": {
      "description": "['Use domain matchers for clarity', 'Custom matchers for domain types', 'Compose matchers']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "property_testing_description": {
      "description": "Generate inputs and verify properties; similar to Hypothesis",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# property_testing_description pattern for kotest-patterns\n# Implement based on description: Generate inputs and verify properties; similar to ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "property_testing_idiom": {
      "description": "checkAll<String, String> { a, b -> (a + b).length shouldBe a.length + b.length }",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# property_testing_idiom pattern for kotest-patterns\n# Implement based on description: checkAll<String, String> { a, b -> (a + b).length ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "property_testing_when_to_use": {
      "description": "Invariants, serialization, parsing",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# property_testing_when_to_use pattern for kotest-patterns\n# Implement based on description: Invariants, serialization, parsing...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "property_testing_best_practices": {
      "description": "['Define clear properties', 'Use Arb for custom generators', 'Shrinking for failures']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "testcontainers_description": {
      "description": "Real containers for integration tests",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# testcontainers_description pattern for kotest-patterns\n# Implement based on description: Real containers for integration tests...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "testcontainers_idiom": {
      "description": "val postgres = PostgreSQLContainer<Nothing>().apply { start() }; datasource.url = postgres.jdbcUrl",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# testcontainers_idiom pattern for kotest-patterns\n# Implement based on description: val postgres = PostgreSQLContainer<Nothing>().appl...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "testcontainers_when_to_use": {
      "description": "Database, Redis, Kafka, S3 integration tests",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# testcontainers_when_to_use pattern for kotest-patterns\n# Implement based on description: Database, Redis, Kafka, S3 integration tests...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "testcontainers_best_practices": {
      "description": "['Reuse containers for speed', 'Use @Testcontainers with JUnit', 'Define in project base']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "listeners_description": {
      "description": "Before/after hooks, tagging, parallel configuration",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# listeners_description pattern for kotest-patterns\n# Implement based on description: Before/after hooks, tagging, parallel configuratio...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "listeners_idiom": {
      "description": "listeners += MyCustomListener; tags(IntegrationTest)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# listeners_idiom pattern for kotest-patterns\n# Implement based on description: listeners += MyCustomListener; tags(IntegrationTes...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "listeners_when_to_use": {
      "description": "Setup/teardown, resource management, config",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# listeners_when_to_use pattern for kotest-patterns\n# Implement based on description: Setup/teardown, resource management, config...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "listeners_best_practices": {
      "description": "['Use listeners for cross-cutting', 'Tags for test filtering', 'Project config for defaults']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "data_driven_tests_description": {
      "description": "Table-driven tests with multiple inputs",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# data_driven_tests_description pattern for kotest-patterns\n# Implement based on description: Table-driven tests with multiple inputs...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "data_driven_tests_idiom": {
      "description": "table(headers(\"a\", \"b\", \"sum\"), row(1, 2, 3), row(2, 3, 5)).forAll { a, b, sum -> a + b shouldBe sum }",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# data_driven_tests_idiom pattern for kotest-patterns\n# Implement based on description: table(headers(\"a\", \"b\", \"sum\"), row(1, 2, 3), row(...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "data_driven_tests_when_to_use": {
      "description": "Parameterized tests, matrix of inputs",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# data_driven_tests_when_to_use pattern for kotest-patterns\n# Implement based on description: Parameterized tests, matrix of inputs...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "data_driven_tests_best_practices": {
      "description": "['Use table for readability', 'Include edge cases', 'Name columns clearly']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    }
  },
  "best_practices": [
    "Use for integration/feature tests",
    "Keep scenarios focused",
    "Nest given/when/then logically",
    "Use should for behavior",
    "Keep nesting shallow",
    "Use for gradual migration",
    "Prefer Kotest native styles when possible",
    "Use domain matchers for clarity"
  ],
  "anti_patterns": [
    "Applying patterns without understanding the underlying concepts",
    "Copy-pasting solutions without adapting to specific context",
    "Over-engineering simple problems with complex patterns"
  ]
}