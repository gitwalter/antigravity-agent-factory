{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "id": "agent-society-protocol",
  "name": "Agent Society Protocol",
  "title": "Agent Society Protocol",
  "version": "1.0.0",
  "description": "Protocol patterns for multi-agent societies with portable behaviors, tiered trust, and economic value creation",
  "category": "core",
  "axiomAlignment": {
    "A1_verifiability": "UAL signatures and PABP verification enable verification of agent actions",
    "A2_user_primacy": "Tiered trust and event sourcing preserve user sovereignty",
    "A3_transparency": "Event sourcing and UAL make agent interactions traceable",
    "A4_non_harm": "Anti-exploitation and axiom alignment prevent harmful outcomes",
    "A5_consistency": "Unified protocol patterns across society, federation, and economy layers"
  },
  "related_skills": [
    "society-tier-selection",
    "verified-communication",
    "enforcement-selection",
    "export-agent-bundle"
  ],
  "related_knowledge": [
    "agent-society-verification.json",
    "multi-agent-patterns.json"
  ],
  "metadata": {
    "name": "Agent Society Protocol",
    "version": "1.0.0",
    "description": "Protocol patterns for multi-agent societies with portable behaviors, tiered trust, and economic value creation",
    "category": "ai_agent",
    "tags": [
      "multi-agent",
      "protocol",
      "society",
      "federation",
      "economy",
      "trust",
      "portable-behavior",
      "ual",
      "pabp"
    ],
    "created": "2026-02-08",
    "updated": "2026-02-08"
  },
  "layer_extension": {
    "description": "Extension of 5-layer architecture (L0-L4) with society layers (L5-L7)",
    "layers": {
      "L5_society": {
        "name": "Society",
        "purpose": "Inter-agent coordination within a single agent society",
        "components": [
          "Universal Agent Language (UAL)",
          "Agent Contracts",
          "Event Sourcing",
          "Reputation System"
        ],
        "trust_levels": [
          "L0_local",
          "L1_attested"
        ],
        "artifacts": [
          "society/contracts/",
          "society/events/",
          "society/trust/",
          "society/protocols/"
        ]
      },
      "L6_federation": {
        "name": "Federation",
        "purpose": "Cross-society interoperability",
        "components": [
          "Protocol Translation",
          "Federation Registry",
          "Identity Federation",
          "Capability Discovery"
        ],
        "trust_levels": [
          "L2_contracted"
        ],
        "artifacts": [
          "federation/registry/",
          "federation/bridges/",
          "federation/identity/",
          "federation/contracts/"
        ]
      },
      "L7_economy": {
        "name": "Economy",
        "purpose": "Value exchange and incentive alignment",
        "components": [
          "Value Attribution (Shapley)",
          "Payment and Settlement",
          "Reputation as Asset",
          "Market Mechanisms",
          "Anti-Exploitation"
        ],
        "trust_levels": [
          "L3_consensus",
          "L4_economic"
        ],
        "artifacts": [
          "economy/attribution/",
          "economy/payment/",
          "economy/markets/",
          "economy/reputation/"
        ]
      }
    },
    "precedence": "L0 > L1 > L2 > L3 > L4 > L5 > L6 > L7"
  },
  "universal_agent_language": {
    "description": "Standardized communication protocol for axiom-aligned agent interaction",
    "message_structure": {
      "header": {
        "message_id": "UUID v4",
        "sender_did": "did:method:identifier",
        "receiver_did": "did:method:identifier",
        "timestamp": "ISO 8601",
        "sequence": "monotonic integer",
        "signature": "Ed25519 signature"
      },
      "performative": {
        "types": [
          "INFORM",
          "REQUEST",
          "PROPOSE",
          "ACCEPT",
          "REJECT",
          "COMMIT",
          "QUERY",
          "CONFIRM",
          "CANCEL",
          "TRANSFER_REQUEST",
          "TRANSFER_OFFER"
        ]
      },
      "content": {
        "type": "text | structured | file | stream",
        "payload": "content-type specific",
        "metadata": "optional context"
      },
      "axiom_context": {
        "declared": [
          "A0",
          "A1",
          "A2"
        ],
        "justification": "human-readable explanation"
      },
      "provenance": {
        "previous_hash": "SHA-256 of previous message",
        "event_hash": "SHA-256 of this message"
      }
    },
    "compatibility": {
      "fipa_acl": "Mapped performatives",
      "a2a": "AgentCard and Task compatibility",
      "json_ld": "Semantic web extensions",
      "nlip": "Envelope protocol wrapper"
    }
  },
  "portable_agent_behavior": {
    "description": "Protocol for transferring agent capabilities, knowledge, and workflows",
    "agent_bundle": {
      "structure": {
        "manifest.json": "Version, checksums, signatures, compatibility",
        "identity/": "DID, public key, reputation snapshot",
        "skills/": "SKILL.md files with dependencies",
        "{directories.knowledge}/": "Domain knowledge JSON files",
        "{directories.workflows}/": "YAML/BPMN workflow definitions",
        "contracts/": "Contract templates and signed agreements",
        "attestations/": "Verifiable credentials and endorsements"
      }
    },
    "transfer_modes": {
      "full_bundle": "Complete agent export",
      "selective": "Specific components only",
      "incremental": "Delta updates since last sync",
      "reference_only": "Capability advertisement without content"
    },
    "verification": {
      "pre_transfer": [
        "Manifest integrity check",
        "Signature verification",
        "Compatibility assessment",
        "Axiom compliance check"
      ],
      "post_transfer": [
        "Component checksum verification",
        "Reference integrity check",
        "Behavioral validation"
      ]
    },
    "privacy": {
      "classification": [
        "public",
        "internal",
        "confidential",
        "restricted"
      ],
      "mechanisms": [
        "Zero-knowledge capability proofs",
        "Reputation proof without history",
        "Selective disclosure"
      ]
    }
  },
  "tiered_trust": {
    "description": "Progressive verification matching trust level to interaction stakes",
    "tiers": {
      "L0_local": {
        "name": "Local Verification",
        "mechanism": "Ed25519 cryptographic signatures",
        "guarantees": [
          "Authenticity",
          "Integrity"
        ],
        "latency": "<10ms",
        "cost": "Minimal",
        "use_when": "Low-stakes, same-society interactions"
      },
      "L1_attested": {
        "name": "Attested Verification",
        "mechanism": "Merkle root anchoring on blockchain",
        "guarantees": [
          "Tamper evidence",
          "Timestamp proof"
        ],
        "latency": "Minutes (batch interval)",
        "cost": "Moderate",
        "use_when": "Medium-stakes, audit trail required"
      },
      "L2_contracted": {
        "name": "Contracted Verification",
        "mechanism": "Smart contract enforcement",
        "guarantees": [
          "Automated enforcement",
          "Dispute resolution"
        ],
        "latency": "Seconds to minutes",
        "cost": "Higher (gas fees)",
        "use_when": "High-stakes agreements, economic transactions"
      },
      "L3_consensus": {
        "name": "Consensus Verification",
        "mechanism": "Multi-party decentralized consensus",
        "guarantees": [
          "Byzantine fault tolerance",
          "Decentralized agreement"
        ],
        "latency": "Minutes to hours",
        "cost": "Highest",
        "use_when": "Critical decisions, high-value transactions"
      },
      "L4_economic": {
        "name": "Economic Verification",
        "mechanism": "Stake-based trust with slashing",
        "guarantees": [
          "Economic security",
          "Aligned incentives"
        ],
        "latency": "Variable",
        "cost": "Stake requirement",
        "use_when": "Sustained economic relationships"
      }
    },
    "escalation": {
      "triggers": [
        "Violation threshold exceeded",
        "Dispute unresolved",
        "Multi-party conflict",
        "Critical violation detected"
      ],
      "path": [
        "L0",
        "L1",
        "L2",
        "L3",
        "L4"
      ],
      "de_escalation": "After compliance period with good behavior"
    },
    "inheritance": {
      "cross_society": "Via verifiable credentials",
      "delegation": {
        "max_depth": 3,
        "decay_per_hop": 0.8,
        "formula": "trust = product(edge_trust * decay^hop)"
      }
    }
  },
  "economic_model": {
    "description": "Value creation and exchange mechanisms for agent societies",
    "value_attribution": {
      "shapley_value": {
        "description": "Fair distribution based on marginal contributions",
        "properties": [
          "Efficiency",
          "Symmetry",
          "Null player",
          "Additivity"
        ],
        "formula": "\u03c6\u1d62(v) = \u03a3 (|S|!(n-|S|-1)!/n!) \u00d7 [v(S\u222a{i}) - v(S)]"
      },
      "use_cases": [
        "Multi-agent task completion",
        "Collaborative knowledge creation",
        "Workflow execution attribution"
      ]
    },
    "payment_models": {
      "usage_based": "Pay per task or interaction",
      "subscription": "Recurring payments for access",
      "credit_based": "Prepaid credits for services",
      "performance_based": "Payment tied to outcomes"
    },
    "reputation_as_asset": {
      "algorithm": "TraceRank (transaction-weighted PageRank)",
      "weighting": "Transaction value \u00d7 payer reputation \u00d7 temporal recency",
      "utility": "Per-request service decisions, discovery ranking",
      "sybil_resistance": "Reputation-weighted ranking"
    },
    "market_mechanisms": {
      "auctions": "AEX-inspired real-time bidding",
      "marketplaces": "Skill discovery and pricing",
      "dao_governance": "Token-based collective decisions",
      "dynamic_pricing": "Supply/demand adjustment"
    },
    "anti_exploitation": {
      "sybil_resistance": [
        "Identity binding",
        "Reputation weighting",
        "Stake requirements"
      ],
      "collusion_detection": [
        "Statistical analysis",
        "Graph analysis"
      ],
      "manipulation_prevention": [
        "Asymmetric mechanisms",
        "Temporal decay"
      ],
      "stake_slashing": [
        "Axiom violations",
        "Contract breaches"
      ]
    },
    "axiom_alignment": {
      "love": "Fair value distribution, anti-exploitation",
      "truth": "Transparent attribution, verifiable transactions",
      "beauty": "Elegant market mechanisms, harmonious incentives"
    }
  },
  "protocol_integration": {
    "description": "Integration with existing multi-agent protocols",
    "protocols": {
      "mcp": {
        "integration": "UAL translation layer",
        "features": [
          "Tool exposure",
          "Resource access"
        ]
      },
      "a2a": {
        "integration": "AgentCard compatibility",
        "features": [
          "Task delegation",
          "Capability discovery"
        ]
      },
      "anp": {
        "integration": "DID-based identity",
        "features": [
          "Decentralized identity",
          "JSON-LD semantics"
        ]
      },
      "coral": {
        "integration": "Protocol bridge",
        "features": [
          "Marketplace integration",
          "Orchestration"
        ]
      },
      "loka": {
        "integration": "Ethics layer",
        "features": [
          "DECP integration",
          "Ethical consensus"
        ]
      },
      "nlip": {
        "integration": "Envelope protocol",
        "features": [
          "Multimodal support",
          "Transport bindings"
        ]
      }
    }
  },
  "implementation_roadmap": {
    "phase_1": {
      "name": "Specification",
      "items": [
        "UAL schema finalization",
        "PABP format definition",
        "Trust tier specification"
      ]
    },
    "phase_2": {
      "name": "Reference Implementation",
      "items": [
        "lib/society/ extension",
        "UAL message router",
        "PABP bundle manager"
      ]
    },
    "phase_3": {
      "name": "Federation",
      "items": [
        "Protocol bridges",
        "Identity federation",
        "Cross-society discovery"
      ]
    },
    "phase_4": {
      "name": "Economic Layer",
      "items": [
        "Shapley attribution",
        "Payment integration",
        "Marketplace MVP"
      ]
    },
    "phase_5": {
      "name": "Ecosystem",
      "items": [
        "Agent marketplace",
        "Society explorer",
        "Developer console"
      ]
    }
  },
  "references": {
    "internal": [
      "{directories.docs}/research/agent-society-protocol/",
      "{directories.docs}/LAYERED_ARCHITECTURE.md",
      "{directories.knowledge}/agent-society-verification.json",
      "lib/society/"
    ],
    "external": [
      {
        "title": "IETF AI Agent Protocols Framework",
        "url": "https://datatracker.ietf.org/doc/html/draft-rosenberg-aiproto-framework"
      },
      {
        "title": "A2A Protocol",
        "url": "https://google.github.io/A2A/"
      },
      {
        "title": "LOKA Protocol",
        "url": "https://arxiv.org/abs/2504.10915"
      },
      {
        "title": "SkillFlow Framework",
        "url": "https://arxiv.org/abs/2504.06188"
      },
      {
        "title": "The Agentic Economy",
        "url": "https://arxiv.org/abs/2505.15799"
      }
    ]
  },
  "patterns": {
    "ual_communication": {
      "description": "Use Universal Agent Language for standardized message passing",
      "use_when": "Agents from different societies need to communicate",
      "code_example": "msg = {\n    \"header\": {\"message_id\": \"...\", \"sender_did\": \"did:key:...\", \"timestamp\": \"...\"},\n    \"performative\": \"REQUEST\",\n    \"content\": {\"type\": \"text\", \"payload\": \"...\"}\n}",
      "best_practices": [
        "Document the pattern usage and rationale in code comments",
        "Validate implementation against domain requirements before deployment"
      ]
    },
    "pabp_transfer": {
      "description": "Transfer agent capabilities using Portable Agent Behavior bundles",
      "use_when": "Need to share agent skills, knowledge, or workflows between systems",
      "code_example": "\n# PABP bundle structure\nbundle = {\n    \"manifest.json\": {\"version\": \"1.0\", \"checksums\": {...}},\n    \"identity/\": \"DID and public key\",\n    \"skills/\": \"SKILL.md files\",\n    \"knowledge/\": \"Domain JSON files\"\n}",
      "best_practices": [
        "Document the pattern usage and rationale in code comments",
        "Validate implementation against domain requirements before deployment"
      ]
    },
    "tiered_trust_escalation": {
      "description": "Escalate trust verification from L0 to L4 based on violation severity",
      "use_when": "Detecting violations or handling disputes requires higher trust guarantees",
      "code_example": "\n# Escalate from L0 to L2 on violation\nif violation_count > threshold:\n    trust_level = \"L2_contracted\"\n    enforce_smart_contract()",
      "best_practices": [
        "Document the pattern usage and rationale in code comments",
        "Validate implementation against domain requirements before deployment"
      ]
    },
    "merkle_anchoring": {
      "description": "Batch events into Merkle tree and anchor root on blockchain",
      "use_when": "Need tamper evidence for event history without storing all events on-chain",
      "code_example": "\nroot = merkle_tree.compute_root(events_batch)\nblockchain.anchor(root)\n# Verify: merkle_proof.verify(event, root)",
      "best_practices": [
        "Document the pattern usage and rationale in code comments",
        "Validate implementation against domain requirements before deployment"
      ]
    },
    "shapley_attribution": {
      "description": "Calculate fair value distribution using Shapley value algorithm",
      "use_when": "Multiple agents contribute to task completion and need fair compensation",
      "code_example": "\n# Value attribution\ncontributions = [agent_a_marginal, agent_b_marginal, agent_c_marginal]\nshapley_values = compute_shapley(contributions)\ndistribute_payment(shapley_values)",
      "best_practices": [
        "Document the pattern usage and rationale in code comments",
        "Validate implementation against domain requirements before deployment"
      ]
    },
    "event_sourcing": {
      "description": "Store all agent actions as immutable, signed events",
      "use_when": "Need audit trail, state reconstruction, or violation detection",
      "code_example": "\nevent = {\n    \"event_id\": str(uuid4()),\n    \"previous_hash\": prev_hash,\n    \"action\": {\"type\": \"message\", \"payload\": data},\n    \"signature\": sign(event)\n}\nevent_store.append(event)",
      "best_practices": [
        "Document the pattern usage and rationale in code comments",
        "Validate implementation against domain requirements before deployment"
      ]
    }
  },
  "best_practices": [
    "Use Universal Agent Language (UAL) for standardized agent-to-agent communication",
    "Implement tiered trust verification matching trust level to interaction stakes",
    "Sign all agent messages with Ed25519 signatures for authenticity and integrity",
    "Use Portable Agent Behavior (PABP) bundles for transferring agent capabilities",
    "Anchor Merkle roots on blockchain for tamper evidence in medium-stakes interactions",
    "Implement Shapley value attribution for fair value distribution in multi-agent tasks",
    "Use event sourcing with cryptographic signatures for immutable agent behavior logs",
    "Select appropriate trust tier (L0-L4) based on interaction stakes and requirements"
  ],
  "anti_patterns": [
    {
      "name": "Using wrong trust tier for interactions",
      "problem": "Over-engineering low-stakes interactions or under-securing high-stakes ones",
      "solution": "Match trust tier to interaction stakes - L0 for local, L2+ for economic transactions"
    },
    {
      "name": "Not verifying agent identities",
      "problem": "Unauthorized agents can impersonate trusted agents",
      "solution": "Always verify Ed25519 signatures and check agent DID credentials"
    },
    {
      "name": "Ignoring axiom alignment in contracts",
      "problem": "Agents may violate core principles (love, truth, beauty) without enforcement",
      "solution": "Include axiom requirements in agent contracts and verify compliance"
    },
    {
      "name": "No event sourcing for agent actions",
      "problem": "Cannot audit agent behavior or detect violations after the fact",
      "solution": "Implement event sourcing with signed event chains for all agent actions"
    },
    {
      "name": "Unfair value attribution",
      "problem": "Some agents contribute more but receive equal compensation",
      "solution": "Use Shapley value or similar fair attribution mechanisms for multi-agent contributions"
    }
  ]
}