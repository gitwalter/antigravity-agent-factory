{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "id": "spring-observability-patterns",
  "name": "Spring Observability Patterns",
  "title": "Spring Boot Observability Patterns",
  "description": "Best practices and patterns for implementing observability in Spring Boot applications using Micrometer, distributed tracing, structured logging, and health monitoring",
  "version": "1.0.0",
  "category": "java",
  "axiomAlignment": {
    "A1_verifiability": "Observability enables verification of system behavior through metrics, traces, and logs",
    "A2_user_primacy": "SLIs and SLOs focus on user-facing reliability and performance",
    "A3_transparency": "Comprehensive observability provides transparency into system operations and performance",
    "A4_non_harm": "Health probes and alerting enable early detection and mitigation",
    "A5_consistency": "Unified observability patterns across Spring Boot services"
  },
  "related_skills": [
    "spring-observability",
    "logging-monitoring",
    "kubernetes-deployment",
    "docker-deployment"
  ],
  "related_knowledge": [
    "spring-patterns.json",
    "spring-microservices-patterns.json",
    "kubernetes-deployment-patterns.json",
    "docker-patterns.json"
  ],
  "patterns": {
    "metrics_micrometer_description": {
      "description": "Micrometer - metrics facade for Spring Boot",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_description pattern for spring-observability-patterns\n# Implement based on description: Micrometer - metrics facade for Spring Boot...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_registries_prometheus": {
      "description": "Prometheus registry - most common",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_registries_prometheus pattern for spring-observability-patterns\n# Implement based on description: Prometheus registry - most common...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_registries_influx": {
      "description": "InfluxDB registry   ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_registries_influx pattern for spring-observability-patterns\n# Implement based on description: InfluxDB registry   ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_registries_cloudwatch": {
      "description": "AWS CloudWatch registry",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_registries_cloudwatch pattern for spring-observability-patterns\n# Implement based on description: AWS CloudWatch registry...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_registries_datadog": {
      "description": "Datadog registry    ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_registries_datadog pattern for spring-observability-patterns\n# Implement based on description: Datadog registry    ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_registries_new_relic": {
      "description": "New Relic registry  ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_registries_new_relic pattern for spring-observability-patterns\n# Implement based on description: New Relic registry  ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_metric_types_counter": {
      "description": "Monotonically increasing value (e.g., request count)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_metric_types_counter pattern for spring-observability-patterns\n# Implement based on description: Monotonically increasing value (e.g., request coun...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_metric_types_gauge": {
      "description": "Current value that can go up or down (e.g., queue size)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_metric_types_gauge pattern for spring-observability-patterns\n# Implement based on description: Current value that can go up or down (e.g., queue ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_metric_types_timer": {
      "description": "Duration of operations (e.g., request latency)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_metric_types_timer pattern for spring-observability-patterns\n# Implement based on description: Duration of operations (e.g., request latency)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_metric_types_summary": {
      "description": "Distribution of values (e.g., response sizes)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_micrometer_metric_types_summary pattern for spring-observability-patterns\n# Implement based on description: Distribution of values (e.g., response sizes)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_micrometer_best_practices": {
      "description": "['Use Micrometer for all metrics', 'Use appropriate metric types', 'Add meaningful tags/labels', 'Avoid high cardinality tags', 'Export to Prometheus for Kubernetes', 'Monitor business metrics, not just technical']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "metrics_custom_metrics_description": {
      "description": "Create custom application metrics",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_description pattern for spring-observability-patterns\n# Implement based on description: Create custom application metrics...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_patterns_business_metrics": {
      "description": "Track business KPIs (orders created, revenue)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_patterns_business_metrics pattern for spring-observability-patterns\n# Implement based on description: Track business KPIs (orders created, revenue)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_patterns_performance_metrics": {
      "description": "Track performance (response times, throughput)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_patterns_performance_metrics pattern for spring-observability-patterns\n# Implement based on description: Track performance (response times, throughput)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_patterns_error_metrics": {
      "description": "Track errors (error rates, error types)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_patterns_error_metrics pattern for spring-observability-patterns\n# Implement based on description: Track errors (error rates, error types)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_patterns_resource_metrics": {
      "description": "Track resource usage (CPU, memory, threads)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_patterns_resource_metrics pattern for spring-observability-patterns\n# Implement based on description: Track resource usage (CPU, memory, threads)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_examples_counter": {
      "description": "products.created, orders.completed",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_examples_counter pattern for spring-observability-patterns\n# Implement based on description: products.created, orders.completed...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_examples_timer": {
      "description": "product.query.duration, order.processing.time",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_examples_timer pattern for spring-observability-patterns\n# Implement based on description: product.query.duration, order.processing.time...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_custom_metrics_examples_gauge": {
      "description": "active.users.count, queue.size",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_custom_metrics_examples_gauge pattern for spring-observability-patterns\n# Implement based on description: active.users.count, queue.size...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_description": {
      "description": "Built-in Spring Boot metrics",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_description pattern for spring-observability-patterns\n# Implement based on description: Built-in Spring Boot metrics...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_metrics_http_server_requests": {
      "description": "HTTP request metrics",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_metrics_http_server_requests pattern for spring-observability-patterns\n# Implement based on description: HTTP request metrics...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_metrics_jvm_memory": {
      "description": "JVM memory usage    ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_metrics_jvm_memory pattern for spring-observability-patterns\n# Implement based on description: JVM memory usage    ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_metrics_jvm_gc": {
      "description": "Garbage collection metrics",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_metrics_jvm_gc pattern for spring-observability-patterns\n# Implement based on description: Garbage collection metrics...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_metrics_jvm_threads": {
      "description": "Thread metrics      ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_metrics_jvm_threads pattern for spring-observability-patterns\n# Implement based on description: Thread metrics      ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_metrics_process_cpu": {
      "description": "CPU usage           ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_metrics_process_cpu pattern for spring-observability-patterns\n# Implement based on description: CPU usage           ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_metrics_hikari_connections": {
      "description": "Database connection pool metrics",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_metrics_hikari_connections pattern for spring-observability-patterns\n# Implement based on description: Database connection pool metrics...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "metrics_spring_boot_metrics_configuration": {
      "description": "management.metrics.export.prometheus.enabled=true",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# metrics_spring_boot_metrics_configuration pattern for spring-observability-patterns\n# Implement based on description: management.metrics.export.prometheus.enabled=true...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_micrometer_tracing_description": {
      "description": "Micrometer Tracing - Spring-native distributed tracing",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_micrometer_tracing_description pattern for spring-observability-patterns\n# Implement based on description: Micrometer Tracing - Spring-native distributed tra...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_micrometer_tracing_tracers_brave": {
      "description": "Brave tracer (Zipkin compatible)",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_micrometer_tracing_tracers_brave pattern for spring-observability-patterns\n# Implement based on description: Brave tracer (Zipkin compatible)...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_micrometer_tracing_tracers_otel": {
      "description": "OpenTelemetry tracer",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_micrometer_tracing_tracers_otel pattern for spring-observability-patterns\n# Implement based on description: OpenTelemetry tracer...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_micrometer_tracing_tracers_wavefront": {
      "description": "Wavefront tracer    ",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_micrometer_tracing_tracers_wavefront pattern for spring-observability-patterns\n# Implement based on description: Wavefront tracer    ...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_micrometer_tracing_features": {
      "description": "['Automatic instrumentation', 'Spring integration', 'Multiple tracer support', 'Context propagation']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "distributed_tracing_micrometer_tracing_configuration": {
      "description": "management.tracing.sampling.probability=1.0",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_micrometer_tracing_configuration pattern for spring-observability-patterns\n# Implement based on description: management.tracing.sampling.probability=1.0...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_zipkin_description": {
      "description": "Zipkin distributed tracing system",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_zipkin_description pattern for spring-observability-patterns\n# Implement based on description: Zipkin distributed tracing system...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_zipkin_features": {
      "description": "['Request tracing visualization', 'Dependency graph', 'Timing analysis', 'Service map']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "distributed_tracing_zipkin_configuration": {
      "description": "management.zipkin.tracing.endpoint",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_zipkin_configuration pattern for spring-observability-patterns\n# Implement based on description: management.zipkin.tracing.endpoint...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_zipkin_use_when": {
      "description": "Need distributed tracing visualization",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_zipkin_use_when pattern for spring-observability-patterns\n# Implement based on description: Need distributed tracing visualization...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_jaeger_description": {
      "description": "Jaeger distributed tracing",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_jaeger_description pattern for spring-observability-patterns\n# Implement based on description: Jaeger distributed tracing...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_jaeger_features": {
      "description": "['High performance', 'OpenTelemetry support', 'UI for visualization', 'Sampling strategies']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "distributed_tracing_jaeger_configuration": {
      "description": "management.tracing.export.jaeger.*",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_jaeger_configuration pattern for spring-observability-patterns\n# Implement based on description: management.tracing.export.jaeger.*...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_jaeger_use_when": {
      "description": "Need high-performance tracing",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_jaeger_use_when pattern for spring-observability-patterns\n# Implement based on description: Need high-performance tracing...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_trace_concepts_trace": {
      "description": "Complete request path across services",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_trace_concepts_trace pattern for spring-observability-patterns\n# Implement based on description: Complete request path across services...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_trace_concepts_span": {
      "description": "Individual operation within a trace",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_trace_concepts_span pattern for spring-observability-patterns\n# Implement based on description: Individual operation within a trace...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_trace_concepts_span_kind": {
      "description": "SERVER, CLIENT, PRODUCER, CONSUMER",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_trace_concepts_span_kind pattern for spring-observability-patterns\n# Implement based on description: SERVER, CLIENT, PRODUCER, CONSUMER...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_trace_concepts_correlation_id": {
      "description": "Unique ID propagated across services",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_trace_concepts_correlation_id pattern for spring-observability-patterns\n# Implement based on description: Unique ID propagated across services...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_trace_concepts_baggage": {
      "description": "Context data propagated with trace",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_trace_concepts_baggage pattern for spring-observability-patterns\n# Implement based on description: Context data propagated with trace...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_trace_concepts_sampling": {
      "description": "Reduce trace volume in high-throughput systems",
      "use_when": "Apply when implementing this pattern in your domain context",
      "code_example": "# distributed_tracing_trace_concepts_sampling pattern for spring-observability-patterns\n# Implement based on description: Reduce trace volume in high-throughput systems...",
      "best_practices": [
        "Validate implementation against domain requirements",
        "Document the pattern usage and rationale in code"
      ]
    },
    "distributed_tracing_best_practices": {
      "description": "['Use Micrometer Tracing with Spring Boot', 'Propagate trace context across service calls', 'Add custom spans for business operations', 'Use correlation IDs in logs', 'Configure appropriate sampling rates', 'Monitor trace volume and performance', 'Add trace context to error messages', 'Use baggage for cross-service context']",
      "use_when": "See description for when to apply this pattern.",
      "code_example": "See description for when to apply this pattern.",
      "best_practices": [
        "Review and validate implementation against domain requirements",
        "Review and validate implementation against domain requirements"
      ]
    },
    "structured_logging": {
      "description": "Logging in structured format (JSON)",
      "logback": {
        "description": "Logback with Logstash encoder",
        "encoder": "net.logstash.logback.encoder.LogstashEncoder",
        "features": [
          "JSON format",
          "Structured fields",
          "MDC support",
          "Caller information"
        ],
        "configuration": "logback-spring.xml with LogstashEncoder"
      },
      "log4j2": {
        "description": "Log4j2 with JSON layout",
        "layout": "JsonTemplateLayout",
        "use_when": "Using Log4j2 instead of Logback"
      },
      "mdc": {
        "description": "Mapped Diagnostic Context - add context to logs",
        "use_cases": [
          "Correlation IDs",
          "User IDs",
          "Request IDs",
          "Trace IDs"
        ],
        "example": "MDC.put(\"traceId\", traceId)",
        "best_practices": [
          "Add correlation IDs",
          "Clear MDC after request",
          "Use in async operations",
          "Propagate across threads"
        ]
      },
      "log_levels": {
        "trace": "Very detailed debugging",
        "debug": "Debugging information",
        "info": "General information",
        "warn": "Warning messages",
        "error": "Error messages"
      },
      "best_practices": [
        "Use structured logging (JSON)",
        "Add correlation IDs",
        "Use appropriate log levels",
        "Don't log sensitive information",
        "Use MDC for context",
        "Configure different formats per environment",
        "Monitor log volume",
        "Use log aggregation (ELK, Loki)"
      ],
      "use_when": "When building Java/Spring applications and need structured logging",
      "code_example": "# Structured Logging - implement per Java/Spring conventions"
    },
    "spring_boot_actuator": {
      "description": "Spring Boot Actuator - production-ready features",
      "endpoints": {
        "health": "Application health status",
        "info": "Application information",
        "metrics": "Application metrics",
        "prometheus": "Prometheus metrics endpoint",
        "env": "Environment properties",
        "loggers": "Logger configuration",
        "httptrace": "HTTP request traces",
        "threaddump": "Thread dump",
        "heapdump": "Heap dump"
      },
      "health_indicators": {
        "description": "Custom health checks",
        "built_in": [
          "DatabaseHealthIndicator",
          "DiskSpaceHealthIndicator",
          "PingHealthIndicator",
          "RedisHealthIndicator"
        ],
        "custom": "Implement HealthIndicator interface",
        "use_cases": [
          "Database connectivity",
          "External service availability",
          "Disk space",
          "Custom business health"
        ]
      },
      "configuration": {
        "exposure": "management.endpoints.web.exposure.include",
        "base_path": "management.endpoints.web.base-path",
        "health_details": "management.endpoint.health.show-details"
      },
      "health_probes": {
        "liveness": "Container is alive - /actuator/health/liveness",
        "readiness": "Container is ready - /actuator/health/readiness",
        "startup": "Container has started - /actuator/health/startup",
        "configuration": "management.health.probes.enabled=true"
      },
      "best_practices": [
        "Expose only necessary endpoints",
        "Secure actuator endpoints",
        "Use health probes for Kubernetes",
        "Create custom health indicators",
        "Monitor actuator metrics",
        "Use info endpoint for version info"
      ],
      "use_when": "When building Java/Spring applications and need spring boot actuator",
      "code_example": "# Configuration for spring_boot_actuator\nexposure: management.endpoints.web.exposure.include\nbase_path: management.endpoints.web.base-path\nhealth_details: management.endpoint.health.show-details"
    },
    "prometheus": {
      "description": "Prometheus - metrics collection and alerting",
      "scraping": {
        "description": "Prometheus scrapes metrics from applications",
        "endpoint": "/actuator/prometheus",
        "interval": "Scrape interval (e.g., 15s)",
        "configuration": "prometheus.yml scrape_configs"
      },
      "metrics_format": {
        "description": "Prometheus exposition format",
        "example": "http_server_requests_seconds_count{method=\"GET\",status=\"200\",uri=\"/api/products\"} 1234",
        "types": {
          "counter": "Monotonically increasing",
          "gauge": "Can go up or down",
          "histogram": "Distribution of values",
          "summary": "Similar to histogram"
        }
      },
      "query_language": {
        "description": "PromQL - Prometheus Query Language",
        "examples": {
          "rate": "rate(http_server_requests_seconds_count[5m])",
          "histogram_quantile": "histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m]))",
          "sum": "sum(rate(http_server_requests_seconds_count[5m])) by (status)"
        }
      },
      "best_practices": [
        "Use Prometheus for Kubernetes deployments",
        "Configure appropriate scrape intervals",
        "Use service discovery for scraping",
        "Set up alerting rules",
        "Monitor Prometheus itself",
        "Use recording rules for complex queries"
      ],
      "use_when": "When building Java/Spring applications and need prometheus",
      "code_example": "# Prometheus - implement per Java/Spring conventions"
    },
    "grafana": {
      "description": "Grafana - metrics visualization",
      "data_sources": {
        "prometheus": "Prometheus data source",
        "loki": "Log aggregation",
        "jaeger": "Distributed tracing",
        "elasticsearch": "Log storage"
      },
      "dashboards": {
        "description": "Create dashboards for visualization",
        "panels": {
          "graph": "Time series graphs",
          "stat": "Single stat panels",
          "table": "Table visualizations",
          "heatmap": "Heatmap visualizations"
        },
        "best_practices": [
          "Create service-specific dashboards",
          "Use consistent naming",
          "Add alerts to dashboards",
          "Use variables for flexibility",
          "Share dashboards across teams"
        ]
      },
      "alerting": {
        "description": "Set up alerts based on metrics",
        "channels": {
          "email": "Email notifications",
          "slack": "Slack notifications",
          "pagerduty": "PagerDuty integration",
          "webhook": "Custom webhook"
        },
        "best_practices": [
          "Set up meaningful alerts",
          "Avoid alert fatigue",
          "Use alerting rules in Prometheus",
          "Test alert channels",
          "Document alert runbooks"
        ]
      },
      "use_when": "When building Java/Spring applications and need grafana",
      "code_example": "# Grafana - implement per Java/Spring conventions",
      "best_practices": [
        "Follow grafana best practices for your stack",
        "Validate and test the implementation before production use"
      ]
    },
    "sli_slo": {
      "description": "Service Level Indicators and Objectives",
      "sli": {
        "description": "Service Level Indicator - measurable metric",
        "examples": {
          "availability": "Uptime percentage",
          "latency": "Response time (p50, p95, p99)",
          "error_rate": "Percentage of failed requests",
          "throughput": "Requests per second"
        }
      },
      "slo": {
        "description": "Service Level Objective - target for SLI",
        "examples": {
          "availability": "99.9% uptime",
          "latency": "95% of requests < 200ms",
          "error_rate": "< 0.1% errors",
          "throughput": "> 1000 req/s"
        }
      },
      "sla": {
        "description": "Service Level Agreement - contract with users",
        "relationship": "SLA is typically less strict than SLO"
      },
      "best_practices": [
        "Define SLIs based on user experience",
        "Set realistic SLOs",
        "Monitor SLI continuously",
        "Alert when SLO is at risk",
        "Review and adjust SLOs regularly",
        "Document SLOs and SLIs"
      ],
      "use_when": "When building Java/Spring applications and need sli slo",
      "code_example": "# Sli Slo - implement per Java/Spring conventions"
    },
    "alerting": {
      "description": "Alert on important conditions",
      "alert_types": {
        "critical": "Immediate attention required",
        "warning": "Attention needed soon",
        "info": "Informational alerts"
      },
      "alert_rules": {
        "description": "Define when to alert",
        "examples": {
          "high_error_rate": "Error rate > 1% for 5 minutes",
          "high_latency": "P95 latency > 500ms for 5 minutes",
          "low_availability": "Availability < 99% for 1 minute",
          "resource_exhaustion": "Memory usage > 90%"
        }
      },
      "best_practices": [
        "Alert on symptoms, not causes",
        "Avoid alert fatigue",
        "Use alert grouping",
        "Set appropriate thresholds",
        "Test alert channels",
        "Document runbooks",
        "Review and tune alerts regularly"
      ],
      "use_when": "When building Java/Spring applications and need alerting",
      "code_example": "# Alerting - implement per Java/Spring conventions"
    },
    "correlation_ids": {
      "description": "Track requests across services",
      "implementation": {
        "mdc": "Add to MDC for logging",
        "http_headers": "Propagate via HTTP headers",
        "trace_context": "Include in trace context",
        "messaging": "Include in message headers"
      },
      "best_practices": [
        "Generate at API Gateway",
        "Propagate across all services",
        "Include in all logs",
        "Add to error messages",
        "Use for debugging",
        "Store in trace context"
      ],
      "use_when": "When building Java/Spring applications and need correlation ids",
      "code_example": "# Correlation Ids\n{'mdc': 'Add to MDC for logging', 'http_headers': 'Propagate via HTTP headers', 'trace_context': 'Include in trace context', 'messaging': 'Include in message headers'}"
    },
    "observability_stack": {
      "description": "Complete observability solution",
      "components": {
        "metrics": "Prometheus + Grafana",
        "logs": "ELK Stack (Elasticsearch, Logstash, Kibana) or Loki",
        "traces": "Zipkin or Jaeger",
        "apm": "Application Performance Monitoring (optional)"
      },
      "integrations": {
        "spring_boot": "Micrometer for metrics and tracing",
        "kubernetes": "Prometheus Operator, ServiceMonitor",
        "ci_cd": "Observability in deployment pipelines"
      },
      "best_practices": [
        "Use consistent naming conventions",
        "Correlate metrics, logs, and traces",
        "Set up dashboards for each service",
        "Implement alerting",
        "Monitor the monitoring system",
        "Regularly review and optimize"
      ],
      "use_when": "When building Java/Spring applications and need observability stack",
      "code_example": "# Observability Stack - implement per Java/Spring conventions"
    }
  },
  "best_practices": [
    "Implement the three pillars: metrics, logs, traces",
    "Use Micrometer for all metrics",
    "Use structured logging (JSON)",
    "Add correlation IDs to all requests",
    "Configure health probes for Kubernetes",
    "Export metrics to Prometheus",
    "Create Grafana dashboards",
    "Set up meaningful alerts",
    "Define SLIs and SLOs",
    "Monitor business metrics",
    "Use distributed tracing",
    "Correlate metrics, logs, and traces",
    "Review observability regularly",
    "Document observability setup"
  ],
  "anti_patterns": []
}