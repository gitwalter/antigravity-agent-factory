{
  "metadata": {
    "blueprintId": "solana-rust",
    "blueprintName": "Solana Rust Blueprint",
    "description": "Solana program development with Rust and Anchor framework",
    "version": "1.0.0",
    "author": "Antigravity Agent Factory",    "tags": [
      "rust",
      "solana",
      "anchor",
      "blockchain",
      "smart-contracts",
      "web3"
    ]
  },
  "stack": {
    "primaryLanguage": "rust",
    "secondaryLanguage": "typescript",
    "frameworks": [
      {
        "name": "Anchor",
        "version": "0.32+",        "purpose": "Solana program framework"
      },
      {
        "name": "Solana SDK",
        "version": "2.0+",        "purpose": "Solana primitives"
      },
      {
        "name": "SPL Token",
        "version": "4.0+",
        "purpose": "Token program library"
      },
      {
        "name": "Metaplex",
        "version": "latest",
        "purpose": "NFT standards",
        "optional": true
      }
    ],
    "databases": [
      {
        "type": "blockchain",
        "name": "Solana Mainnet",
        "purpose": "Production"
      },
      {
        "type": "blockchain",
        "name": "Solana Devnet",
        "purpose": "Testing"
      },
      {
        "type": "local",
        "name": "solana-test-validator",
        "purpose": "Local development"
      }
    ],
    "tools": [
      {
        "name": "cargo",
        "purpose": "Rust package manager"
      },
      {
        "name": "anchor",
        "purpose": "Build and deploy"
      },
      {
        "name": "solana-cli",
        "purpose": "Solana interaction"
      },
      {
        "name": "cargo-clippy",
        "purpose": "Rust linting"
      },
      {
        "name": "cargo-fmt",
        "purpose": "Rust formatting"
      }
    ],
    "styleGuides": [
      {
        "name": "rust-style",
        "description": "Rust API Guidelines",
        "reference": "https://rust-lang.github.io/api-guidelines/"
      },
      {
        "name": "anchor-conventions",
        "description": "Anchor best practices"
      }
    ]
  },
  "agents": [
    {
      "patternId": "code-reviewer",
      "required": true,
      "customizations": {
        "skills": [
          "rust-review",
          "grounding"
        ]
      }
    },
    {
      "patternId": "test-generator",
      "required": true,
      "customizations": {
        "skills": [
          "tdd"
        ]
      }
    },
    {
      "patternId": "explorer",
      "required": false
    },
    {
      "patternId": "knowledge-extender",
      "required": true,
      "description": "Extend knowledge base during development"
    },
    {
      "patternId": "knowledge-evolution",
      "required": true,
      "description": "Manage and evolve project knowledge independently"
    },
    {
      "patternId": "factory-updates",
      "required": true,
      "description": "Receive updates from the Antigravity Agent Factory"    },
    {
      "patternId": "debug-conductor-project",
      "required": false,
      "description": "Autonomous debugging agent for CI/CD and test failures"
    }
  ],
  "skills": [
    {
      "patternId": "bugfix-workflow",
      "required": true
    },
    {
      "patternId": "feature-workflow",
      "required": true
    },
    {
      "patternId": "grounding",
      "required": true
    },
    {
      "patternId": "grounding-verification",
      "required": true,
      "default": true,
      "description": "Two-pass verification for LLM grounding and factual claims"
    },
    {
      "patternId": "alignment-check",
      "required": true,
      "default": true,
      "description": "Verify understanding before major implementations"
    },
    {
      "patternId": "research-first-project",
      "required": true,
      "default": true,
      "description": "Research existing solutions before building"
    },
    {
      "patternId": "tdd",
      "required": true
    },
    {
      "patternId": "code-templates",
      "required": true
    },
    {
      "patternId": "extend-knowledge",
      "required": true,
      "description": "Extend knowledge base with new topics"
    },
    {
      "patternId": "receive-updates",
      "required": true,
      "description": "Receive updates from Factory"
    },
    {
      "patternId": "ci-monitor-project",
      "required": false,
      "default": true,
      "description": "Monitor CI/CD pipelines with automatic error detection"
    },
    {
      "patternId": "pipeline-error-fix-project",
      "required": false,
      "default": true,
      "description": "Systematic pipeline error detection and fixing"
    }
  ],
  "knowledge": [
    {
      "filename": "solana-patterns.json",
      "description": "Solana program patterns: account model, PDAs, CPI, transactions"
    },
    {
      "filename": "anchor-patterns.json",
      "description": "Anchor framework: constraints, account types, error handling"
    },
    {
      "filename": "solana-security.json",
      "description": "Security vulnerabilities, attack vectors, audit checklist"
    },
    {
      "filename": "naming-conventions.json",
      "description": "Rust naming conventions"
    }
  ],
  "templates": {
    "codeTemplates": [
      {
        "category": "anchor-program",
        "directory": "templates/rust-solana/programs/"
      },
      {
        "category": "token-program",
        "directory": "templates/rust-solana/programs/"
      },
      {
        "category": "state-account",
        "directory": "templates/rust-solana/programs/"
      },
      {
        "category": "integration-test",
        "directory": "templates/rust-solana/tests/"
      }
    ],
    "documentTemplates": [
      {
        "name": "program_design.md",
        "directory": "templates/docs/"
      }
    ]
  },
  "workflows": [
    {
      "patternId": "solana-development",
      "customizations": {}
    },
    {
      "patternId": "jira-bugfix",
      "customizations": {}
    }
  ],
  "mcpServers": [
    {
      "name": "deepwiki",
      "url": "https://mcp.deepwiki.com/mcp",
      "purpose": "Solana/Anchor docs",
      "required": false
    }
  ],
  "projectStructure": {
    "directories": [
      {
        "path": ".agent/agents/",
        "purpose": "AI agent definitions"
      },
      {
        "path": ".agent/skills/",        "purpose": "Reusable skills"
      },
      {
        "path": "programs/",
        "purpose": "Solana programs"
      },
      {
        "path": "programs/{{PROGRAM_NAME}}/src/",
        "purpose": "Program source"
      },
      {
        "path": "programs/{{PROGRAM_NAME}}/src/instructions/",
        "purpose": "Instruction handlers"
      },
      {
        "path": "programs/{{PROGRAM_NAME}}/src/state/",
        "purpose": "Account state"
      },
      {
        "path": "tests/",
        "purpose": "Integration tests"
      },
      {
        "path": "app/",
        "purpose": "Frontend application",
        "optional": true
      },
      {
        "path": "scripts/",
        "purpose": "Utility scripts"
      },
      {
        "path": "migrations/",
        "purpose": "Deployment migrations"
      },
      {
        "path": "target/",
        "purpose": "Build artifacts"
      }
    ],
    "files": [
      {
        "path": ".agentrules",        "purpose": "Agent behavior rules"
      },
      {
        "path": "Anchor.toml",
        "purpose": "Anchor configuration"
      },
      {
        "path": "Cargo.toml",
        "purpose": "Rust workspace"
      },
      {
        "path": "package.json",
        "purpose": "TypeScript tests"
      }
    ]
  },
  "cursorrules": {
    "variables": [
      {
        "name": "RUST_VERSION",
        "default": "1.85.0"
      },
      {
        "name": "SOLANA_VERSION",
        "default": "2.0"
      },
      {
        "name": "ANCHOR_VERSION",
        "default": "0.32.0"      },
      {
        "name": "CLUSTER",
        "default": "devnet"
      }
    ],
    "rules": [
      {
        "name": "Account Validation",
        "description": "Always validate account ownership and constraints"
      },
      {
        "name": "PDA Seeds",
        "description": "Use consistent, documented PDA seed patterns"
      },
      {
        "name": "Error Handling",
        "description": "Use custom error types with descriptive messages"
      },
      {
        "name": "Rent Exemption",
        "description": "Ensure all accounts are rent-exempt"
      },
      {
        "name": "CPI Safety",
        "description": "Validate program IDs before cross-program invocations"
      },
      {
        "name": "Testing",
        "description": "Write TypeScript integration tests for all instructions"
      }
    ]
  },
  "solanaPatterns": {
    "accounts": [
      "Program Derived Addresses (PDAs)",
      "Account Data Layout",
      "Account Validation",
      "Rent Exemption"
    ],
    "instructions": [
      "Anchor Constraints",
      "Account Contexts",
      "Error Handling",
      "Events"
    ],
    "security": [
      "Signer Verification",
      "Owner Checks",
      "PDA Validation",
      "CPI Guard"
    ]
  },
  "securityChecklist": {
    "required": [
      "Signer verification on privileged operations",
      "Account owner validation",
      "PDA seed verification",
      "Integer overflow protection",
      "Rent exemption verification"
    ],
    "recommended": [
      "Reentrancy protection",
      "Rate limiting",
      "Multi-sig for admin functions",
      "Upgrade authority management"
    ]
  },
  "pmIntegration": {
    "enabled": false,
    "description": "Optional project management integration with agile workflows",
    "agents": [
      {"patternId": "product-owner", "description": "Creates and refines stories, prioritizes backlog"},
      {"patternId": "sprint-master", "description": "Facilitates sprint ceremonies and removes blockers"},
      {"patternId": "task-manager", "description": "Breaks stories into tasks, manages issues"},
      {"patternId": "reporting-agent", "description": "Generates metrics, burndowns, dashboards"}
    ],
    "skills": [
      {"patternId": "create-story", "description": "Create user stories with acceptance criteria"},
      {"patternId": "create-epic", "description": "Create epics with child story structure"},
      {"patternId": "create-task", "description": "Create implementation tasks"},
      {"patternId": "plan-sprint", "description": "Sprint planning workflow"},
      {"patternId": "run-standup", "description": "Daily standup facilitation"},
      {"patternId": "close-sprint", "description": "Sprint closure and velocity calculation"}
    ],
    "backends": ["github", "jira", "linear", "azure-devops"]
  }
}
